<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title>Our instagram photos</title>
        <meta name="viewport" content="width=device-width">

        <!-- CSS -->
        <link rel="stylesheet" href="/css/main.css">
        <style type="text/css" media="all">
          
        </style>

    </head>

    <body>
      <title style="display:none">Alex + Emma (#alexdillemma) Wedding website</title>
      <div id="navbar">
        <ul>
          <li><a href="/index.html#site">Home</a></li>
          <li><a href="/our-story.html#site">Our Story</a></li>
          <li><a href="/festivities.html#site">Weekend Festivities</a></li>
          <li><a href="/information.html#site">Travel & Hotels</a></li>
          <li><a href="/what-to-bring.html#site">What to Bring</a></li>
          <li><a href="/registry.html#site">Registry</a></li>
          <li><a href="/rsvp.html#site">RSVP</a></li>
          <li><a href="/instagram.html#site" class="purple_text">#alexdillemma</a></li>
        </ul>
      </div>
      <div id="site" class="gray_background">
        <h1>Our Instagram Feed!</h1>

<p>Please help us document our wedding by sharing your photos on Instagram.</p>

<h2>Use our hashtag:  #alexdillemma</h2>

<div id="instagram_authorize_oauth">
<!--A link to let Instagram authorize this webpage-->
</div>

<div id="instafeed">
<!--Instagram photos inserted here-->
</div>

<pre>
  <script
    type="text/javascript"
    src="/js/instafeed.min.js">
  </script>

  <script type="text/javascript">
    // Setup vars for an instagram feed using instafeedjs
    
    var data = {
        get: 'tagged',
        tagName: 'alexdillemma',
        resolution: 'low_resolution',
        sortBy: 'most-recent',
        template: '<a href="{{link}}"><div class="instagram_image_holder"><div style="background-image:url({{image}})" class="instagram_image"></div></div></a>'
    };
    

    // Add client_id
    
    
      var clientId = 'd5a94fab34bd49cba895b1bc1b26a854';
      var redirect_uri = 'http://alexdillemma.com/instagram.html';
    
    data['clientId'] = clientId;

    // Try to add access token from url or session cache if possible
    // hack: instagram returns access token as a hash, not as a query param
    var accessToken = location.hash.split('=')[1];
    var cache_key = redirect_uri + '--instagram_access_token--';
    if (!accessToken) {
      accessToken = window.sessionStorage.getItem(cache_key);
    }
    if (accessToken) {
      data['accessToken'] = accessToken;
      window.sessionStorage.setItem(cache_key, accessToken);
    }

    // run the instagram feed
    var feed = new Instafeed(data);
    feed.run();

    // hack: add a link enabling people to view photos within their network
    // if instagram let me have multiple referers, I wouldn't do it this way
    var aTag = document.createElement('a');
    aTag.setAttribute('href', 'https://instagram.com/oauth/authorize/?' + 
      'client_id=' + clientId + '&redirect_uri=' + redirect_uri
      + '&response_type=token');
    aTag.innerHTML = "Login to Instagram to see more photos.";
    document.getElementById("instagram_authorize_oauth").appendChild(aTag);

  </script>
</pre>

      </div>
    </body>

    <footer>
      
    
            <script type="text/javascript">
var jekyllMapping = (function () {
    'use strict';
    var settings;
    var obj = {
        plotArray: function(locations) {
            function jekyllMapListen (m, s) {
                if (s.link) {
                    google.maps.event.addListener(m, 'click', function() {
                        window.location.href = s.link;
                    });
                }
            }
            var bounds = new google.maps.LatLngBounds(), markers = [], s, l, m;
            while (locations.length > 0) {
                s = locations.pop();
                l = new google.maps.LatLng(s.latitude, s.longitude);
                m = new google.maps.Marker({
                    position: l,
                    map: this.map,
                    title: s.title
                });
                markers.push(m);
                bounds.extend(l);                
                jekyllMapListen(m, s);
            }
            this.map.fitBounds(bounds);
        },
        indexMap: function () {
            this.plotArray(settings.pages);
        },
        pageToMap: function () {
            if (typeof(settings.latitude) !== 'undefined' && typeof(settings.longitude) !== 'undefined') {
                this.options.center = new google.maps.LatLng(settings.latitude, settings.longitude);

                var mainMarker = new google.maps.Marker({
                    position: this.options.center,
                    map: this.map,
                    title: "Our instagram photos"
                });
                this.map.setCenter(this.options.center);
            }     

            if (settings.locations instanceof Array) {
                this.plotArray(settings.locations);
            }

            if (settings.kml) {
                var mainLayer = new google.maps.KmlLayer(settings.kml);
                mainLayer.setMap(this.map);
            }
            
            if (settings.layers) {
                var layers = [];
                while (settings.layers.length > 0){
                    var m = new google.maps.KmlLayer(settings.layers.pop());
                    layers.push(m);
                    m.setMap(this.map);
                }
            }
        },
        mappingInitialize: function () {
            this.options = {
                zoom: 10,
                mapTypeId: google.maps.MapTypeId.ROADMAP,
                center: new google.maps.LatLng(0, 0)
            };

            this.map = new google.maps.Map(document.getElementById("jekyll-mapping"), this.options);

            if (settings.pages) {
                this.indexMap();
            } else {
                this.pageToMap();
            }
        },
        loadScript: function (set) {
            settings = set;
            var script = document.createElement("script");
            script.type = "text/javascript";
            script.src = "http://maps.googleapis.com/maps/api/js?key=" + settings.api_key + "&sensor=false&callback=jekyllMapping.mappingInitialize";
            document.body.appendChild(script);
        }
    };
    return obj;
}());
</script> 
        
    

    </footer>
</html>
